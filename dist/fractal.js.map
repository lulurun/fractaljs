{"version":3,"file":"fractal.js","sources":["../src/class.js","../src/pubsub.js","../src/config.js","../src/component.js","../src/index.js"],"sourcesContent":["/* Simple JavaScript Inheritance\n * By John Resig http://ejohn.org/\n * MIT Licensed.\n */\n// Inspired by base2 and Prototype\nvar initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\\b_super\\b/ : /.*/;\nvar Class = function(){};\nClass.extend = function(prop) {\n  var _super = this.prototype;\n  var callee = this.extend;\n\n  initializing = true;\n  var prototype = new this();\n  initializing = false;\n\n  for (var name in prop) {\n    prototype[name] = typeof prop[name] == \"function\" &&\n      typeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\n      (function(name, fn){\n        return function() {\n          var tmp = this._super;\n          this._super = _super[name];\n\n          var ret = fn.apply(this, arguments);\n          this._super = tmp;\n\n          return ret;\n        };\n      })(name, prop[name]) :\n    prop[name];\n  }\n\n  var Class = function(){\n    if ( !initializing && this.init )\n      this.init.apply(this, arguments);\n  }\n\n  Class.prototype = prototype;\n  Class.prototype.constructor = Class;\n\n  Class.extend = this.extend;\n  return Class;\n};\n\nexport default Class\n","let topics = {}, seq = 0;\n\nexport default {\n  publish: function(topic, data, publisher) {\n    console.debug(\"publish\", topic);\n    let subscribers = topics[topic];\n    for (let i in subscribers)\n      subscribers[i].cb(topic, data, publisher);\n  },\n  subscribe: function(topic, cb, subscriber) {\n    console.debug(\"subscribe\", topic);\n    if (!topics[topic])\n      topics[topic] = [];\n    let token = ++seq;\n    topics[topic].push({\n      token: token,\n      subscriber: subscriber,\n      cb: cb\n    });\n    return token;\n  },\n  unsubscribe: function(topic, token) {\n    console.debug(\"unsubscribe\", topic);\n    if (!(topic in topics))\n      return;\n    let subscribers = topics[topic];\n    for (let i in subscribers) {\n      if (subscribers[i].token === token) {\n        subscribers.splice(i, 1);\n        break;\n      }\n    }\n    if (subscribers.length === 0)\n      delete topics[topic];\n  },\n  getSubscribers: function(topic) {\n    if (!(topic in topics))\n      return [];\n    return topics[topic].map(v => { return v.subscriber; });\n  },\n};\n","import Pubsub from './pubsub'\n\nfunction noImpl(name) {\n  return function(){\n    throw new Error('To be defined: ' + name);\n  };\n}\n\nexport default {\n  compile: false,\n  render: noImpl('render'),\n  dynamicRequire: {\n    component: noImpl('dynamicRequire.component'),\n    template: noImpl('dynamicRequire.template'),\n  },\n  Pubsub: Pubsub,\n}\n","import Class from './class'\nimport Config from './config'\n\nconst COMPONENT_ATTR = 'f-component'\nconst RENDERED_ATTR = 'f-rendered'\nlet knownComponents = {}\n\nfunction hasClass(el, className) {\n  if (el.classList)\n    el.classList.contains(className);\n  else\n    new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n}\n\nfunction addClass(el, className) {\n  if (el.classList)\n    el.classList.add(className);\n  else\n    el.className += ' ' + className;\n}\n\nexport const Component = Class.extend({\n  init: function(name, el, parent) {\n    this.name = name;\n    this.el = el;\n    this.complete = false;\n    this.subTokens = {};\n    if (this.name && !this.template)\n      this.template = getTemplate(this.templateName || this.name);\n    this.parent = parent;\n    this.children = [];\n  },\n  getData: function(cb, param) {\n    cb(this.data || {});\n  },\n  render: function(data, template, param) {\n    this.el.innerHTML = Config.render(template, data);\n    this.children.forEach(c => {\n      c.destroyed(param);\n    });\n    this.children = [];\n  },\n  rendered: function(param){},\n  loadChildren: function(cb, param) {\n    let els = this.el.querySelectorAll('[' + COMPONENT_ATTR + ']');\n    if (!els || !els.length)\n      return cb();\n    let len = els.length;\n\n    let nbComplete = 0;\n    Array.prototype.forEach.call(els, (el, i) => {\n      let name = el.getAttribute(COMPONENT_ATTR);\n      console.debug(\"found component:\", name);\n      let Class = getComponent(name);\n      let c = new Class(name, el, this);\n      this.children.push(c);\n      c.load(param, () => {\n        if (++nbComplete === len)\n          cb();\n      });\n    });\n  },\n  loaded: function(param){},\n  destroyed: function(param){\n    this.children.forEach(c => {\n      c.destroyed(param);\n    });\n    this.children = [];\n    console.debug(this.name, \"destroyed\");\n    for (let topic in this.subTokens)\n      Config.Pubsub.unsubscribe(this.subTokens[topic]);\n  },\n  // main entry\n  load: function(param, cb) {\n    param = param || {};\n    console.time('Component.' + this.name);\n    this.complete = false;\n    this.getData(data => {\n      this.render(data, this.template, param);\n      this.rendered(param);\n      this.loadChildren(() => {\n        this.complete = true;\n        console.timeEnd('Component.' + this.name);\n        this.loaded(param);\n        if (!hasClass(this.el, RENDERED_ATTR))\n          addClass(this.el, RENDERED_ATTR);\n      }, param)\n    }, param)\n  },\n  // pubsub\n  publish: function(topic, data) {\n    Config.Pubsub.publish(topic, data, this);\n  },\n  subscribe: function(topic, cb) {\n    this.subTokens[topic] = Config.Pubsub.subscribe(topic, cb, this);\n  },\n});\n\nexport function build(param, cb){\n  let c = new Component('', window.document, null);\n  c.loadChildren(() => {\n    if (cb)\n      cb();\n  }, param || {});\n}\n\nfunction getTemplate(name) {\n  let template = Config.dynamicRequire.template(\"./\" + name + \".html\");\n  if (template) {\n    if (Config.compile)\n      template = Config.compile(template);\n    return template;\n  }\n  console.error(\"Template not found: \" + name);\n  return \"\";\n}\n\nfunction getComponent(name) {\n  if (name in knownComponents)\n    return knownComponents[name];\n  let Class = Config.dynamicRequire.component(\"./\" + name);\n  if (Class) {\n    knownComponents[name] = Class;\n    return Class;\n  }\n  console.error(\"Component not found: \" + name);\n  return Component;\n}\n\nexport function defineComponent(name, props, base) {\n  let c = (base || Component).extend(props || {});\n  if (name)\n    knownComponents[name] = c;\n  return c;\n}\n\n","import {defineComponent, build} from './component'\nimport Config from './config'\n\nexport default {\n  init: function(templateEngine, dynamicRequire, pubsub) {\n    // template engine\n    if (templateEngine) {\n      if (templateEngine.compile)\n        Config.compile = templateEngine.compile;\n      Config.render = templateEngine.render;\n    }\n    // dynamic require\n    if (dynamicRequire) {\n      ['component', 'template'].forEach(v => {\n        if (v in dynamicRequire)\n          Config.dynamicRequire[v] = dynamicRequire[v];\n      });\n    }\n    // pubsub\n    if (pubsub) {\n      ['publish', 'subscribe', 'unsubscribe'].forEach(v => {\n        if (v in pubsub)\n          Config.Pubsub[v] = pubsub[v];\n      });\n    }\n  },\n  build: build,\n  Pubsub: Config.Pubsub,\n  component: defineComponent,\n}\n\n"],"names":[],"mappings":"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"}